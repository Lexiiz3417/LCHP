<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create a Note - LCHP Tools</title>
    <meta name="description" content="Alat untuk membuat halaman catatan baru dengan tema, format, dan pratinjau langsung.">
    <link rel="icon" type="image/png" href="https://lexiiz3417.github.io/lchp/lchpfav.png">
    <meta property="og:title" content="Create a Note - LCHP Tools">
    <meta property="og:description" content="Alat untuk membuat halaman catatan baru dengan tema, format, dan pratinjau langsung.">
    <meta property="og:image" content="https://lexiiz3417.github.io/lchp/lchp.png">
    <meta property="og:url" content="https://lexiiz3417.github.io/lchp/tools/create-a-note.html">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        body { font-family: 'Courier Prime', 'Courier New', Courier, monospace; background-color: #0d0d0d; color: #e0e0e0; line-height: 1.6; margin: 0; padding: 20px; }
        .main-container { max-width: 1200px; width: 100%; margin: 0 auto; }
        h1, p.subtitle { text-align: center; }
        h1 { color: #ffffff; text-transform: uppercase; letter-spacing: 2px; }
        p.subtitle { color: #a0a0a0; }
        .editor-layout { display: flex; flex-wrap: wrap; gap: 30px; margin-top: 30px; }
        .editor-pane, .preview-pane { flex: 1; min-width: 300px; }
        .editor-pane .container, .preview-pane .container { background-color: #1a1a1a; padding: 25px; border-radius: 8px; border: 1px solid #444; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #f0f0f0; }
        input, textarea { width: 100%; padding: 12px; border: 1px solid #555; border-radius: 4px; box-sizing: border-box; font-size: 16px; font-family: inherit; background-color: #2c2c2c; color: #e0e0e0; }
        textarea#note-content { min-height: 250px; resize: vertical; }
        .format-toolbar { display: flex; gap: 10px; margin-bottom: 10px; }
        .format-toolbar button { width: auto; padding: 8px 12px; font-size: 14px; background-color: #333; border: 1px solid #555; text-transform: none; }
        .format-toolbar button:hover { background-color: #444; }
        #preview-content { font-family: 'Courier New', Courier, monospace; line-height: 1.7; }
        #preview-content h1 { font-size: 24px; text-align: left; }
        #preview-content .author { text-align: left; margin-top: -15px; color: #a0a0a0; font-style: italic; }
        #preview-content .note-content p { margin-bottom: 1.2em; }
        #result-area { margin-top: 30px; display: none; background-color: #1a1a1a; padding: 25px; border-radius: 8px; border: 1px solid #444; }
        #generated-html-code { min-height: 200px; width: 100%; background-color: #0d0d0d; white-space: pre; word-wrap: break-word; }
        #copy-html-button { margin-top: 15px; background-color: #ff4136; border-color: #ff4136; display: inline-flex; align-items: center; justify-content: center; gap: 10px; }
        #copy-html-button:hover { background-color: #fff; color: #ff4136; }
        .back-button { position: fixed; bottom: 25px; right: 25px; z-index: 1000; }
        .back-button a { display: flex; align-items: center; text-decoration: none; color: #ffffff; font-size: 22px; }
    </style>
</head>
<body>

<div class="main-container">
    <h1>Create a Note</h1>
    <p class="subtitle">Buat file catatan HTML baru dengan format standar, toolbar, dan pratinjau langsung.</p>

    <div class="editor-layout">
        <div class="editor-pane">
            <div class="container">
                <form id="note-creator-form">
                    <div class="form-group">
                        <label for="note-title">Judul Catatan</label>
                        <input type="text" id="note-title" placeholder="Tulis judul yang menarik..." required>
                    </div>
                    <div class="form-group">
                        <label for="note-author">Nama Penulis</label>
                        <input type="text" id="note-author" placeholder="Nama Anda (opsional)">
                    </div>
                    <div class="form-group">
                        <label for="note-content">Isi Catatan</label>
                        <div class="format-toolbar">
                            <button type="button" id="format-bold" title="Bold (Ctrl+B)"><i class="fas fa-bold"></i></button>
                            <button type="button" id="format-italic" title="Italic (Ctrl+I)"><i class="fas fa-italic"></i></button>
                            <button type="button" id="format-underline" title="Underline (Ctrl+U)"><i class="fas fa-underline"></i></button>
                            <button type="button" id="format-link" title="Link"><i class="fas fa-link"></i></button>
                        </div>
                        <textarea id="note-content" placeholder="Tulis atau seleksi teks lalu gunakan toolbar di atas..." required></textarea>
                    </div>
                    <button type="submit">
                        <i class="fas fa-cogs"></i> Generate HTML Code
                    </button>
                </form>
            </div>
        </div>

        <div class="preview-pane">
            <div class="container">
                <h3><i class="fas fa-eye"></i> Live Preview</h3>
                <div id="preview-content">
                    </div>
            </div>
        </div>
    </div>

    <div id="result-area">
        <h3><i class="fas fa-check-circle" style="color: #2ecc71;"></i> Kode HTML Siap!</h3>
        <p class="subtitle">Salin kode di bawah ini dan simpan sebagai file .html</p>
        <textarea id="generated-html-code" readonly></textarea>
        <button id="copy-html-button">
            <i class="fas fa-copy"></i>
            <span class="button-text">Salin Kode</span>
        </button>
    </div>
</div>

<div class="floating-icon back-button">
    <a href="https://lexiiz3417.github.io/lchp" target="_blank" title="Kembali ke LCHP Notes">
        <i class="fas fa-chevron-circle-left"></i>
    </a>
</div>

<script>
// --- Elemen Global ---
const noteTitle = document.getElementById('note-title');
const noteAuthor = document.getElementById('note-author');
const noteContent = document.getElementById('note-content');
const previewContent = document.getElementById('preview-content');

// --- FUNGSI LIVE PREVIEW ---
function updatePreview() {
    const title = noteTitle.value || "Judul Catatan...";
    const author = noteAuthor.value;
    const rawContent = noteContent.value;

    const contentHtml = rawContent.split('\n')
        .map(line => line.trim() === '' ? '<br>' : `<p>${line}</p>`)
        .join('');

    previewContent.innerHTML = `
        <h1>${title}</h1>
        ${author ? `<p class="author">Oleh: ${author}</p>` : ''}
        <hr style="border-color: #444; margin: 20px 0;">
        <div class="note-content">${contentHtml}</div>
    `;
}

// Panggil updatePreview saat input berubah
[noteTitle, noteAuthor, noteContent].forEach(el => el.addEventListener('input', updatePreview));
// Panggil sekali saat halaman dimuat
document.addEventListener('DOMContentLoaded', updatePreview);

// --- FUNGSI TOOLBAR FORMATTING ---
function wrapText(tag) {
    const start = noteContent.selectionStart;
    const end = noteContent.selectionEnd;
    const selectedText = noteContent.value.substring(start, end);
    
    if (selectedText.length === 0) {
        alert("Seleksi teks terlebih dahulu!");
        return;
    }

    let replacement;
    if (tag === 'a') {
        const url = prompt("Masukkan URL untuk link:", "https://");
        if (url) {
            replacement = `<a href="${url}" target="_blank">${selectedText}</a>`;
        } else {
            return; // User membatalkan prompt
        }
    } else {
        replacement = `<${tag}>${selectedText}</${tag}>`;
    }

    noteContent.value = noteContent.value.substring(0, start) + replacement + noteContent.value.substring(end);
    updatePreview(); // Perbarui preview setelah format
}

document.getElementById('format-bold').addEventListener('click', () => wrapText('b'));
document.getElementById('format-italic').addEventListener('click', () => wrapText('i'));
document.getElementById('format-underline').addEventListener('click', () => wrapText('u'));
document.getElementById('format-link').addEventListener('click', () => wrapText('a'));


// --- FUNGSI GENERATE & COPY HTML ---
document.getElementById('note-creator-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Ambil data terbaru
    const title = noteTitle.value;
    const author = noteAuthor.value;
    const rawContent = noteContent.value;
    
    // Proses konten, kali ini tanpa filter baris kosong agar format terjaga
    const contentHtml = rawContent.split('\n').map(line => `        <p>${line}</p>`).join('\n');
    const description = rawContent.substring(0, 155).replace(/\n/g, ' ') + '...';
    const fileName = title.toLowerCase().replace(/\s+/g, '-').replace(/[^\w\-]+/g, '') || 'catatan-baru';
    const fullFileName = `${fileName}.html`;

    const generatedHtml = `<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${title} - LCHP Notes</title>
    <meta name="description" content="${description}">
    <link rel="icon" type="image/png" href="https://lexiiz3417.github.io/lchp/lchpfav.png">
    <meta property="og:title" content="${title} - LCHP Notes">
    <meta property="og:description" content="${description}">
    <meta property="og:image" content="https://lexiiz3417.github.io/lchp/lchp.png">
    <meta property="og:url" content="https://lexiiz3417.github.io/lchp/notes/${fullFileName}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        body { font-family: 'Courier New', Courier, monospace; background-color: #0d0d0d; color: #e0e0e0; line-height: 1.7; margin: 0; padding: 20px; }
        .container { background-color: #1a1a1a; padding: 25px 40px; border-radius: 8px; border: 1px solid #444; max-width: 700px; width: 100%; margin: 20px auto; }
        h1 { color: #ffffff; text-align: center; text-transform: uppercase; letter-spacing: 2px; }
        .author { text-align: center; margin-top: -15px; color: #a0a0a0; font-style: italic; }
        .note-content p { margin-bottom: 1.2em; }
        a { color: #ff4136; text-decoration: none; } a:hover { text-decoration: underline; }
        .back-button { position: fixed; bottom: 25px; right: 25px; z-index: 1000; }
        .back-button a { display: flex; align-items: center; text-decoration: none; font-size: 22px; color: #fff; }
        footer { margin-top: 40px; color: #888; font-size: 14px; text-align: center; }
    </style>
</head>
<body>
<div class="floating-icon back-button">
    <a href="https://lexiiz3417.github.io/lchp/" target="_blank" title="Kembali ke LCHP Notes">
        <i class="fas fa-chevron-circle-left"></i>
    </a>
</div>
<div class="container">
    <h1>${title}</h1>
    ${author ? `<p class="author">Oleh: ${author}</p>` : ''}
    <hr style="border-color: #444; margin: 30px 0;">
    <div class="note-content">
${contentHtml}
    </div>
</div>
<footer>
    oleh Lexiiz3417
</footer>
</body>
</html>`;

    // Tampilkan kode di textarea dan munculkan area hasil
    document.getElementById('generated-html-code').value = generatedHtml;
    document.getElementById('result-area').style.display = 'block';
});

// Fungsi untuk tombol "Salin Kode"
document.getElementById('copy-html-button').addEventListener('click', function() {
    const codeToCopy = document.getElementById('generated-html-code').value;
    const icon = this.querySelector('i');
    const text = this.querySelector('.button-text');

    if (!codeToCopy) return;

    navigator.clipboard.writeText(codeToCopy).then(() => {
        icon.className = 'fas fa-check';
        text.textContent = 'Tersalin!';
        setTimeout(() => {
            icon.className = 'fas fa-copy';
            text.textContent = 'Salin Kode';
        }, 2000);
    }).catch(err => {
        console.warn('Gagal salin otomatis, menjalankan fallback...', err);
        try {
            document.getElementById('generated-html-code').select();
            document.execCommand('copy'); // Fallback untuk browser lama
            icon.className = 'fas fa-check';
            text.textContent = 'Teks Terpilih & Tersalin!';
        } catch (e) {
            text.textContent = 'Gagal';
        }
    });
});
</script>
</body>
</html>
